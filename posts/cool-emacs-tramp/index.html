<!DOCTYPE html>
<html class="sea-theme">
    <head>
	

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23680267-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-23680267-3');
</script>


	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<base href="/" />
	<title>Ryan Faulhaber</title>

	<link rel="stylesheet" href="https://unpkg.com/hack@0.8.1/dist/hack.css" />
	<link rel="stylesheet" href="https://unpkg.com/hack@0.8.1/dist/standard.css" />
	<link href="https://fonts.googleapis.com/css?family=Fira+Mono&display=swap" rel="stylesheet" />

	<link rel="stylesheet" href="/css/index.css" />

	<link rel="canonical" href="/posts/cool-emacs-tramp/" />
</head>

    <body>
        <span class="header-path">
  
    <a href="/">/Ryan Faulhaber</a><a href="/posts/">/posts</a><a href="/posts/cool-emacs-tramp/">/cool emacs things: edit files over ssh</a>
  
</span>

    </body>
</html>


<section id="main">
	<h1 id="title">Cool Emacs Things: Edit Files Over SSH</h1>
	<div class="post-meta">Sat, Aug 22, 2020 - 2 min </div>
	
	<div class="subhead-list-container">
		<span class="subhead-label">series:</span>
		<ul class="subhead-list">
			
			<li> <a href="/series/cool-emacs-things">Cool Emacs Things</a> </li>
			
		</ul>
		
	
	<div class="subhead-list-container">
		<span class="subhead-label">tags:</span>
		<ul class="subhead-list">
			
			<li> <a href="/tags/emacs">emacs</a> </li>
			
		</ul>
		
	</div>
	<div>
		<article id="content">
			<p>This is the first installment of an indefinite series calling (in lieu of a better name) &ldquo;Cool Emacs Things,&rdquo; little things about Emacs that makes it a very handy editor.</p>
<p>Today&rsquo;s entry: Editing files over SSH.</p>
<p>This was something I discovered recently by accident. I run a private email server and the IMAP portion of the server is handled by <a href="https://www.dovecot.org/">Dovecot</a>. Dovecot is great but by default the configuration is spread across dozens of files, and, while trying to tediously edit multiple files over SSH in Vim, I thought, &ldquo;Wouldn&rsquo;t it be nice if I could do this with Emacs?&rdquo; Well guess what!</p>
<p><code>C-x C-f</code> (or <code>SPC f f</code> in Doom, which is what I use) will open a &ldquo;find file&rdquo; dialog, obviously letting you open files and peruse your file system. However you don&rsquo;t have to just browse for files. I use Ivy, so your experience may vary, but when I type <code>/ssh: TAB</code> I&rsquo;m shown a list of my SSH connections. <code>/ssh:ryan@email-server:/</code> then will cause Emacs to presumably run some commands using SSH (or a related program) and treat it as a directory on your own computer. You can then used Dired (like an interactive <code>ls</code>, if you aren&rsquo;t an Emacs user!) to explore your remote files and folders and even open files and edit them.</p>
<p>The Emacs package that handles this is called <a href="https://www.gnu.org/software/tramp/">TRAMP</a>, and allows you to do a lot more than just what I&rsquo;m talking about in this post.</p>
<p>There is one issue with this, however: my Dovecot configuration requires root permissions to edit them. TRAMP can handle this too with something called <a href="https://www.gnu.org/software/tramp/#Multi%5F002dhops">multiple hops</a>. The idea is that I&rsquo;ll first connect to the host via SSH and then run any further commands using <code>doas</code> (the OpenBSD equivalent of <code>sudo</code> more or less, as my email server is hosted on OpenBSD).</p>
<p>The final command to do all this looks like:</p>
<pre><code class="language-text">/ssh:ryan@email-server|doas:ryan@email-server:/
</code></pre>
<p>Now I can browse and edit my email server with elevated permissions. Cool!</p>

		</article>
	</div>
</section>
<aside id="meta" style="display: fixed;top:100px;right: 0">
	<div>
		
		<a class="previous" href="/posts/first-emacs-module-rust/"> Writing an Emacs module in Rust</a>
		
		
	</div>
</aside>


</body>

<footer id="footer">
	<p id="copyright">
		
	</p>
</footer>

</html>
